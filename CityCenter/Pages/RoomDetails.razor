@page "/room-details/{roomId:int}"
@using CityCenter.Data
@using CityCenter.Models
@inject AppDbContext Db
@inject NavigationManager NavigationManager

<style>
    body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, #0a0a0a, #111);
        color: #fff;
        margin: 0;
        padding: 0;
    }

    .room-details {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 60px 40px;
    }

    .room-card {
        background: linear-gradient(135deg, rgba(20, 20, 20, 0.95), rgba(40, 40, 40, 0.95));
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
        max-width: 800px;
        width: 100%;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        font-size: 1.3rem;
        color: #fff;
    }

        .room-card:hover {
            transform: scale(1.02);
            box-shadow: 0 0 30px #00aaff;
        }

        .room-card img {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .room-card p {
            margin: 10px 0;
        }

    .btn {
        margin-top: 15px;
        padding: 10px 20px;
        background-color: #00aaff;
        border: none;
        border-radius: 10px;
        color: white;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.3s ease;
    }

        .btn:hover {
            background-color: #0088cc;
        }

    h2 {
        font-size: 2.5rem;
        margin-bottom: 30px;
        text-shadow: 1px 1px 6px rgba(0, 0, 0, 0.5);
    }


</style>

@if (room == null)
{
    <p style="text-align:center; font-size:1.2rem;">Загрузка...</p>
}
else
{
    <div class="room-details">
        <h2>Информация о помещении</h2>

        <div class="room-card">
            @if (!string.IsNullOrEmpty(room.Фото))
            {
                <img src="@room.Фото" alt="Фото помещения" />
            }

            <p><strong>Название:</strong> @room.Название</p>
            <p><strong>Этаж:</strong> @room.Этаж</p>
            <p><strong>Площадь:</strong> @room.Площадь м²</p>
            <p><strong>Стоимость аренды:</strong> @room.СтоимостьАренды.ToString("C")</p>
            <p><strong>Описание:</strong> @room.Описание</p>

            <button class="btn" @onclick="GoToPayment">Перейти к оплате</button>
        </div>
    </div>
}

@code {
    [Parameter] public int roomId { get; set; }

    [Parameter]
    [SupplyParameterFromQuery]
    public int userId { get; set; }

    private Помещения? room;

    protected override async Task OnInitializedAsync()
    {
        room = await Db.Помещенияs.FindAsync(roomId);
    }

    private void GoToPayment()
    {
        NavigationManager.NavigateTo($"/submit-payment/{roomId}/{userId}");
    }


}